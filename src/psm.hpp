#pragma once
#include "address-map.hpp"
#include "int.hpp"

namespace psm {
struct Blocks {
    enum : u32 {
        ROSC                = 0b0000'0000'0000'0000'0000'0000'0000'0001,
        XOSC                = 0b0000'0000'0000'0000'0000'0000'0000'0010,
        CLOCKS              = 0b0000'0000'0000'0000'0000'0000'0000'0100,
        RESETS              = 0b0000'0000'0000'0000'0000'0000'0000'1000,
        BUSFABRIC           = 0b0000'0000'0000'0000'0000'0000'0001'0000,
        ROM                 = 0b0000'0000'0000'0000'0000'0000'0010'0000,
        SRAM0               = 0b0000'0000'0000'0000'0000'0000'0100'0000,
        SRAM1               = 0b0000'0000'0000'0000'0000'0000'1000'0000,
        SRAM2               = 0b0000'0000'0000'0000'0000'0001'0000'0000,
        SRAM3               = 0b0000'0000'0000'0000'0000'0010'0000'0000,
        SRAM4               = 0b0000'0000'0000'0000'0000'0100'0000'0000,
        SRAM5               = 0b0000'0000'0000'0000'0000'1000'0000'0000,
        XIP                 = 0b0000'0000'0000'0000'0001'0000'0000'0000,
        VREG_AND_CHIP_RESET = 0b0000'0000'0000'0000'0010'0000'0000'0000,
        SIO                 = 0b0000'0000'0000'0000'0100'0000'0000'0000,
        PROC0               = 0b0000'0000'0000'0000'1000'0000'0000'0000,
        PROC1               = 0b0000'0000'0000'0001'0000'0000'0000'0000,
    };
};

struct Regs {
    v32  force_on;  // FRCE_ON
    v32  force_off; // FRCE_OFF
    v32  wdsel;
    cv32 done;
};
} // namespace psm

#define PSM_REGS (*(psm::Regs*)(PSM_BASE))
